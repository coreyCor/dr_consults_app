<h1>Editing: <%= @user.name.presence || "Unnamed User" %></h1>

<% if @user.errors.any? %>
  <div class="alert alert-danger">
    <h4>The following errors prevented the user from being saved:</h4>
    <ul>
      <% @user.errors.full_messages.each do |msg| %>
        <li><%= msg %></li>
      <% end %>
    </ul>
  </div>
<% end %>

<%= form_with(model: [:admin, @user], local: true) do |f| %>
  <div class="mb-3">
    <%= f.label :name %>
    <%= f.text_field :name, class: "form-control" %>
  </div>

  <div class="mb-3">
    <%= f.label :email %>
    <%= f.email_field :email, class: "form-control" %>
  </div>

  <div class="mb-3">
    <%= f.label :user_role %>
    <%= f.select :user_role, [["User", "user"], ["Admin", "admin"]], {}, class: "form-select" %>
  </div>

  <div class="mb-3">
    <%= f.label :daily_consult_limit %>
    <%= f.number_field :daily_consult_limit, class: "form-control", min: 0 %>
  </div>

  <div class="mb-3">
    <%= f.label :cooldown_minutes %>
    <%= f.number_field :cooldown_minutes, class: "form-control", min: 0 %>
  </div>

  <div class="mb-3">
    <%= f.label :available_start_time %>
    <%= f.time_field :available_start_time, value: @user.available_start_time&.strftime("%H:%M"), class: "form-control", step: 60 %>
  </div>

  <div class="mb-3">
    <%= f.label :available_end_time %>
    <%= f.time_field :available_end_time, value: @user.available_end_time&.strftime("%H:%M"), class: "form-control", step: 60 %>
  </div>

  <%= f.submit "Update User", class: "btn btn-primary" %>
<% end %>
