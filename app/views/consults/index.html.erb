<h2>All Consults</h2>

<% if @consults.any? %>
  <% @consults.each do |consult| %>
    <div class="consult mb-3 p-2 border rounded">
      <h3><%= link_to consult.title, consult_path(consult) %></h3>
      <p><%= truncate(consult.body, length: 100) %></p>
      <p>Asked by: <%= consult.asked_by.name %></p>
      <p>Assigned to: <%= consult.assigned_to&.name || "Unassigned" %></p>
      <p>Status: <%= consult.status_text %></p>

      <% if consult.asked_by_id == current_user.id %>
        <%= link_to "Edit", edit_consult_path(consult), class: "btn btn-sm btn-warning" %>

        <!--<%= button_to "Delete", consult_path(consult),
                      method: :delete,
                      data: { confirm: "Are you sure you want to delete this consult?" },
                      class: "btn btn-sm btn-danger",
                      form_class: "d-inline" %> -->
      <% end %>
    </div>
  <% end %>
<% else %>
  <p>No consults found.</p>
<% end %>
